<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Customer Service - AI Support Agent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    popover: {
                        DEFAULT: "var(--popover)",
                        foreground: "var(--popover-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                    chart: {
                        "1": "var(--chart-1)",
                        "2": "var(--chart-2)",
                        "3": "var(--chart-3)",
                        "4": "var(--chart-4)",
                        "5": "var(--chart-5)",
                    }
                },
                fontFamily: {
                    sans: ["var(--font-sans)"],
                    serif: ["var(--font-serif)"],
                    mono: ["var(--font-mono)"],
                }
            },
        }
    };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --background: hsl(0 0% 100%);
            --foreground: hsl(222 47% 11%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215 16% 47%);
            --popover: hsl(0 0% 100%);
            --popover-foreground: hsl(222 47% 11%);
            --border: hsl(214 32% 91%);
            --input: hsl(214 32% 91%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(222 47% 11%);
            --primary: hsl(39 100% 50%);
            --primary-foreground: hsl(0 0% 100%);
            --secondary: hsl(210 40% 96%);
            --secondary-foreground: hsl(222 47% 11%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(222 47% 11%);
            --destructive: hsl(0 84% 60%);
            --destructive-foreground: hsl(0 0% 98%);
            --ring: hsl(39 100% 50%);
            --radius: 8px;
            --font-sans: 'Inter', sans-serif;
        }
        
        .amazon-orange { color: #FF9900; }
        .amazon-blue { color: #232F3E; }
        .amazon-bg { background-color: #232F3E; }
        .amazon-orange-bg { background-color: #FF9900; }
        .amazon-light-bg { background-color: #F8F9FA; }
        
        .chat-message {
            animation: fadeInUp 0.3s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .faq-category:hover {
            background-color: hsl(210 40% 96%);
            transition: background-color 0.2s ease;
        }
        
        .typing-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #888;
            animation: typing 1.4s infinite ease-in-out both;
        }
        
        .typing-indicator:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }
        
        .sidebar-toggle {
            transition: transform 0.3s ease;
        }
        
        .sidebar-collapsed {
            transform: translateX(-100%);
        }
    </style>
</head>
<body class="bg-background font-sans antialiased">
    <!-- @COMPONENT: MainLayout -->
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <!-- @COMPONENT: Header -->
        <header class="amazon-bg text-white px-4 py-3 shadow-md">
            <div class="flex items-center justify-between max-w-7xl mx-auto">
                <div class="flex items-center space-x-4">
                    <button id="sidebarToggle" class="lg:hidden text-white hover:text-gray-300">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <div class="flex items-center space-x-2">
                        <i class="fab fa-amazon text-2xl amazon-orange"></i>
                        <h1 class="text-xl font-semibold">Customer Service</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-300">
                        <span class="amazon-orange font-medium" data-bind="user.requestsRemaining">23</span> requests remaining today
                    </div>
                    <div class="flex items-center space-x-2 text-sm">
                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                        <span>AI Agent Online</span>
                    </div>
                </div>
            </div>
        </header>
        <!-- @END_COMPONENT: Header -->

        <div class="flex flex-1 overflow-hidden">
            <!-- FAQ Sidebar -->
            <!-- @COMPONENT: FAQSidebar -->
            <div id="sidebar" class="w-80 bg-card border-r border-border overflow-y-auto sidebar-toggle lg:translate-x-0">
                <div class="p-4 bg-muted border-b border-border">
                    <h2 class="font-semibold text-foreground mb-2">Frequently Asked Questions</h2>
                    <div class="relative">
                        <input 
                            type="text" 
                            placeholder="Search FAQs..." 
                            class="w-full pl-10 pr-4 py-2 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring"
                            data-event="input:handleFAQSearch"
                        >
                        <i class="fas fa-search absolute left-3 top-2.5 text-muted-foreground text-sm"></i>
                    </div>
                </div>

                <div class="p-4 space-y-2">
                    <!-- @MAP: faqCategories.map(category => ( -->
                    
                    <!-- Orders Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="orders"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-box text-primary"></i>
                                <span class="font-medium">Orders</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="orders">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ord-1">
                                    How can I track my order?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ord-2">
                                    When will my order be delivered?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ord-3">
                                    Can I modify my order after placing it?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ord-4">
                                    Why is my order delayed?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ord-5">
                                    Multiple items shipping separately?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Payments Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="payments"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-credit-card text-primary"></i>
                                <span class="font-medium">Payments</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="payments">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pay-1">
                                    Payment methods accepted?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pay-2">
                                    Payment failed but amount deducted?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pay-3">
                                    EMI options available?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pay-4">
                                    Is Cash on Delivery available?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pay-5">
                                    How to get payment refund?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Returns & Refunds Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="returns"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-undo text-primary"></i>
                                <span class="font-medium">Returns & Refunds</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="returns">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ret-1">
                                    How to return an item?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ret-2">
                                    Return window for different items?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ret-3">
                                    When will I get my refund?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ret-4">
                                    Return pickup not scheduled?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="ret-5">
                                    Partial refund received?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Cancellations Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="cancellations"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-times-circle text-primary"></i>
                                <span class="font-medium">Cancellations</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="cancellations">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="can-1">
                                    How to cancel my order?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="can-2">
                                    Can I cancel after dispatch?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="can-3">
                                    Partial order cancellation?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="can-4">
                                    Cancellation charges?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="can-5">
                                    Auto-cancellation reasons?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Prime/Membership Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="prime"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-crown text-primary"></i>
                                <span class="font-medium">Prime Membership</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="prime">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pri-1">
                                    Prime membership benefits?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pri-2">
                                    How to cancel Prime membership?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pri-3">
                                    Prime trial period?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pri-4">
                                    Prime auto-renewal?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="pri-5">
                                    Prime exclusive deals?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Delivery Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="delivery"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-truck text-primary"></i>
                                <span class="font-medium">Delivery</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="delivery">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="del-1">
                                    Standard delivery timeframes?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="del-2">
                                    Same-day delivery available?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="del-3">
                                    Can I reschedule delivery?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="del-4">
                                    What if I'm not home for delivery?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="del-5">
                                    Delivery during holidays?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Warranty & Repairs Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="warranty"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-tools text-primary"></i>
                                <span class="font-medium">Warranty & Repairs</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="warranty">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="war-1">
                                    Product warranty period?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="war-2">
                                    How to claim warranty?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="war-3">
                                    What's covered under warranty?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="war-4">
                                    Extended warranty options?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="war-5">
                                    Repair service centers?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Gift Cards & Coupons Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="giftcards"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-gift text-primary"></i>
                                <span class="font-medium">Gift Cards & Coupons</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="giftcards">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="gif-1">
                                    How to use gift cards?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="gif-2">
                                    Gift card validity period?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="gif-3">
                                    Coupon not working?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="gif-4">
                                    Can I combine multiple coupons?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="gif-5">
                                    Gift card refund policy?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Account & Security Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="account"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-user-shield text-primary"></i>
                                <span class="font-medium">Account & Security</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="account">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="acc-1">
                                    How to change password?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="acc-2">
                                    Update phone number?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="acc-3">
                                    Two-factor authentication?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="acc-4">
                                    Suspicious login activity?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="acc-5">
                                    Delete my account?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- International Shipping Category -->
                    <div class="faq-category border border-border rounded-lg overflow-hidden">
                        <button 
                            class="w-full flex items-center justify-between p-3 text-left hover:bg-accent transition-colors"
                            data-event="click:toggleCategory"
                            data-category="international"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-globe text-primary"></i>
                                <span class="font-medium">International Shipping</span>
                            </div>
                            <i class="fas fa-chevron-down text-muted-foreground"></i>
                        </button>
                        <div class="hidden category-content bg-muted/50" data-category-content="international">
                            <div class="p-2 space-y-1">
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="int-1">
                                    Countries we ship to?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="int-2">
                                    International shipping charges?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="int-3">
                                    Customs and duties?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="int-4">
                                    International delivery time?
                                </button>
                                <button class="w-full text-left text-sm p-2 hover:bg-accent rounded text-muted-foreground" data-event="click:selectFAQ" data-faq-id="int-5">
                                    International returns policy?
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- @END_MAP -->

                    <!-- Other/Chat Option -->
                    <div class="mt-4 p-3 bg-primary/10 border border-primary/20 rounded-lg">
                        <button 
                            class="w-full text-center text-primary font-medium hover:bg-primary/5 p-2 rounded transition-colors"
                            data-event="click:startCustomChat"
                        >
                            <i class="fas fa-comments mr-2"></i>
                            Ask Something Else
                        </button>
                        <p class="text-xs text-muted-foreground mt-2 text-center">
                            Can't find what you're looking for? Chat with our AI assistant.
                        </p>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: FAQSidebar -->

            <!-- Main Chat Area -->
            <!-- @COMPONENT: ChatInterface -->
            <div class="flex-1 flex flex-col bg-background">
                <!-- Chat Header -->
                <div class="bg-card border-b border-border p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-primary-foreground"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-foreground">Amazon Assistant</h3>
                                <p class="text-sm text-muted-foreground">Powered by Gemini AI • Available 24/7</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-muted-foreground">
                            <i class="fas fa-shield-alt text-green-500"></i>
                            <span>Secure Chat</span>
                        </div>
                    </div>
                </div>

                <!-- Chat Messages Container -->
                <!-- @STATE: messages:array = [] -->
                <div id="chatContainer" class="flex-1 overflow-y-auto p-4 space-y-4" data-implementation="Should scroll to bottom when new messages arrive">
                    <!-- Welcome Message -->
                    <div class="chat-message">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-robot text-primary-foreground text-sm"></i>
                            </div>
                            <div class="bg-card border border-border rounded-lg p-4 max-w-md">
                                <p class="text-sm text-foreground">
                                    Hello! I'm your Amazon customer service assistant. I can help you with orders, payments, returns, and more. 
                                    Feel free to browse the FAQs on the left or ask me any question directly.
                                </p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <button class="text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded hover:bg-secondary/80 transition-colors" data-event="click:quickAction" data-action="track-order">
                                        Track my order
                                    </button>
                                    <button class="text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded hover:bg-secondary/80 transition-colors" data-event="click:quickAction" data-action="return-item">
                                        Return an item
                                    </button>
                                    <button class="text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded hover:bg-secondary/80 transition-colors" data-event="click:quickAction" data-action="payment-help">
                                        Payment help
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-muted-foreground ml-11 mt-1">Just now</div>
                    </div>

                    <!-- Sample User Message -->
                    <div class="chat-message" data-mock="true">
                        <div class="flex items-start space-x-3 justify-end">
                            <div class="bg-primary text-primary-foreground rounded-lg p-3 max-w-md">
                                <p class="text-sm">How can I track my recent order?</p>
                            </div>
                            <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-user text-secondary-foreground text-sm"></i>
                            </div>
                        </div>
                        <div class="text-xs text-muted-foreground mr-11 mt-1 text-right">2 minutes ago</div>
                    </div>

                    <!-- Sample Bot Response -->
                    <div class="chat-message" data-mock="true">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-robot text-primary-foreground text-sm"></i>
                            </div>
                            <div class="bg-card border border-border rounded-lg p-4 max-w-md">
                                <p class="text-sm text-foreground mb-2">
                                    You can track your order by going to "Your Orders" in your account. Tracking details are updated within 12 hours of dispatch.
                                </p>
                                <div class="bg-muted p-3 rounded-md">
                                    <p class="text-xs font-medium text-foreground mb-1">Quick Actions:</p>
                                    <div class="space-y-1">
                                        <button class="text-xs text-primary hover:underline block" data-event="click:quickAction" data-action="view-orders">
                                            → View Your Orders
                                        </button>
                                        <button class="text-xs text-primary hover:underline block" data-event="click:quickAction" data-action="contact-seller">
                                            → Contact Seller
                                        </button>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3 mt-3 pt-2 border-t border-border">
                                    <button class="text-xs text-muted-foreground hover:text-foreground transition-colors" data-event="click:feedbackAction" data-feedback="helpful">
                                        <i class="fas fa-thumbs-up mr-1"></i>Helpful
                                    </button>
                                    <button class="text-xs text-muted-foreground hover:text-foreground transition-colors" data-event="click:feedbackAction" data-feedback="not-helpful">
                                        <i class="fas fa-thumbs-down mr-1"></i>Not Helpful
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-muted-foreground ml-11 mt-1">2 minutes ago</div>
                    </div>

                    <!-- Typing Indicator (Hidden by default) -->
                    <div id="typingIndicator" class="chat-message hidden" data-implementation="Show when AI is processing response">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-robot text-primary-foreground text-sm"></i>
                            </div>
                            <div class="bg-card border border-border rounded-lg p-4">
                                <div class="flex items-center space-x-1">
                                    <span class="text-sm text-muted-foreground">Amazon Assistant is typing</span>
                                    <div class="flex space-x-1 ml-2">
                                        <div class="typing-indicator"></div>
                                        <div class="typing-indicator"></div>
                                        <div class="typing-indicator"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="bg-card border-t border-border p-4">
                    <!-- Rate Limit Warning (Hidden by default) -->
                    <div id="rateLimitWarning" class="hidden mb-3 p-3 bg-destructive/10 border border-destructive/20 rounded-lg">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-exclamation-triangle text-destructive"></i>
                            <p class="text-sm text-destructive">
                                Daily free usage limit reached. Please try again tomorrow or contact customer care for unlimited access.
                            </p>
                        </div>
                    </div>

                    <div class="flex items-end space-x-3">
                        <div class="flex-1">
                            <div class="relative">
                                <textarea
                                    placeholder="Type your question here... (e.g., 'How do I return an item?')"
                                    class="w-full resize-none border border-input rounded-lg px-4 py-3 pr-12 focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground placeholder-muted-foreground"
                                    rows="1"
                                    data-event="input:handleMessageInput"
                                    data-implementation="Should auto-resize and handle Enter key for send"
                                ></textarea>
                                <button 
                                    class="absolute right-2 bottom-2 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    data-event="click:sendMessage"
                                    data-implementation="Should validate input and trigger RAG search or Gemini API call"
                                >
                                    <i class="fas fa-paper-plane text-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between mt-2 text-xs text-muted-foreground">
                        <div class="flex items-center space-x-4">
                            <span>
                                <i class="fas fa-info-circle mr-1"></i>
                                Powered by Gemini AI with RAG Knowledge Base (1000+ entries)
                            </span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span data-bind="user.requestsRemaining">23</span>
                            <span>/</span>
                            <span>25 requests remaining today</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: ChatInterface -->
        </div>

        <!-- Footer -->
        <footer class="bg-muted border-t border-border p-4">
            <div class="max-w-7xl mx-auto flex items-center justify-between text-sm text-muted-foreground">
                <div class="flex items-center space-x-4">
                    <span>© 2024 Amazon Customer Service</span>
                    <a href="#" class="hover:text-foreground transition-colors">Privacy Policy</a>
                    <a href="#" class="hover:text-foreground transition-colors">Terms of Service</a>
                </div>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-lock text-green-500"></i>
                    <span>Private & Secure</span>
                </div>
            </div>
        </footer>
    </div>
    <!-- @END_COMPONENT: MainLayout -->

    <script>
        // TODO: Implement business logic, API calls, and state management
        (function() {
            // Sidebar toggle functionality
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('sidebar');
            
            sidebarToggle?.addEventListener('click', function() {
                sidebar.classList.toggle('sidebar-collapsed');
            });

            // FAQ category toggle functionality
            const categoryButtons = document.querySelectorAll('[data-event="click:toggleCategory"]');
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    const content = document.querySelector(`[data-category-content="${category}"]`);
                    const chevron = this.querySelector('.fa-chevron-down');
                    
                    if (content) {
                        content.classList.toggle('hidden');
                        chevron.style.transform = content.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
                    }
                });
            });

            // FAQ selection functionality
            const faqButtons = document.querySelectorAll('[data-event="click:selectFAQ"]');
            faqButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const faqId = this.getAttribute('data-faq-id');
                    const question = this.textContent.trim();
                    
                    // TODO: Add user message to chat
                    // TODO: Retrieve answer from knowledge base instantly
                    // TODO: Display answer in chat interface
                    console.log('FAQ selected:', faqId, question);
                });
            });

            // Quick action buttons
            const quickActionButtons = document.querySelectorAll('[data-event="click:quickAction"]');
            quickActionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.getAttribute('data-action');
                    // TODO: Handle quick actions based on action type
                    console.log('Quick action:', action);
                });
            });

            // Message input functionality
            const messageInput = document.querySelector('[data-event="input:handleMessageInput"]');
            const sendButton = document.querySelector('[data-event="click:sendMessage"]');
            
            if (messageInput) {
                // Auto-resize textarea
                messageInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                });

                // Send message on Enter (but not Shift+Enter)
                messageInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
            }

            sendButton?.addEventListener('click', sendMessage);

            function sendMessage() {
                const input = document.querySelector('[data-event="input:handleMessageInput"]');
                const message = input?.value.trim();
                
                if (!message) return;
                
                // TODO: Add user message to chat interface
                // TODO: Convert message to embedding and search knowledge base
                // TODO: If no match found, call Gemini API with context
                // TODO: Display AI response in chat
                // TODO: Update rate limiting counter
                
                console.log('Sending message:', message);
                input.value = '';
                input.style.height = 'auto';
            }

            // Feedback functionality
            const feedbackButtons = document.querySelectorAll('[data-event="click:feedbackAction"]');
            feedbackButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const feedback = this.getAttribute('data-feedback');
                    // TODO: Record feedback for analytics and model improvement
                    console.log('Feedback received:', feedback);
                    
                    // Visual feedback
                    this.style.color = feedback === 'helpful' ? '#067D62' : '#DC2626';
                    this.style.opacity = '0.7';
                });
            });

            // Start custom chat functionality
            const customChatButton = document.querySelector('[data-event="click:startCustomChat"]');
            customChatButton?.addEventListener('click', function() {
                // TODO: Clear any selected FAQ and focus on chat input
                const chatInput = document.querySelector('[data-event="input:handleMessageInput"]');
                chatInput?.focus();
                console.log('Starting custom chat mode');
            });

            // FAQ search functionality
            const faqSearchInput = document.querySelector('[data-event="input:handleFAQSearch"]');
            faqSearchInput?.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                // TODO: Filter FAQ categories and questions based on search term
                // TODO: Highlight matching text
                console.log('Searching FAQs:', searchTerm);
            });

            // Auto-scroll chat to bottom
            function scrollChatToBottom() {
                const chatContainer = document.getElementById('chatContainer');
                if (chatContainer) {
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }

            // Rate limiting check (demo)
            let requestCount = 2; // Demo: already used 2 requests
            const maxRequests = 25;

            function checkRateLimit() {
                const remaining = maxRequests - requestCount;
                const remainingElements = document.querySelectorAll('[data-bind="user.requestsRemaining"]');
                remainingElements.forEach(el => {
                    el.textContent = remaining;
                });

                if (remaining <= 0) {
                    const rateLimitWarning = document.getElementById('rateLimitWarning');
                    const sendButton = document.querySelector('[data-event="click:sendMessage"]');
                    const messageInput = document.querySelector('[data-event="input:handleMessageInput"]');
                    
                    rateLimitWarning?.classList.remove('hidden');
                    sendButton?.setAttribute('disabled', 'true');
                    messageInput?.setAttribute('disabled', 'true');
                }
            }

            // Initialize
            scrollChatToBottom();
            checkRateLimit();

            // Responsive behavior
            function handleResize() {
                if (window.innerWidth >= 1024) {
                    sidebar.classList.remove('sidebar-collapsed');
                } else {
                    sidebar.classList.add('sidebar-collapsed');
                }
            }

            window.addEventListener('resize', handleResize);
            handleResize(); // Initial call
        })();
    </script>
</body>
</html>